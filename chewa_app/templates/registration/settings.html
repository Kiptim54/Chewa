{% extends 'registration/base.html' %}

{% block content %}
  <h2>Settings</h2>
  {% if user.is_authenticated %}
  <p>You are logged in as {{user.username}}</p>
  {%endif %}

  <h3>Google</h3>
  {% if google_login %}
    <p>Connected as <a href="https://google.com/{{ google_login.extra_data.login }}/" target="_blank">{{ google_login.extra_data.login }}</a></p>
    {% if can_disconnect %}
      <form method="post" action="{% url 'social:disconnect' 'google-oauth2' %}">
        {% csrf_token %}
        <button type="submit">Disconnect from Google</button>
        <p>This will completley disconnect you from Chewa and you will lose all your progress</p>
      </form>
    {% else %}
      <button type="button" disabled>Disconnect from Google</button>
      <p style="color: red">You must <a href="{% url 'password' %}">define a password</a> for your account before disconnecting from Google.</p>
    {% endif %}
  {% else %}
    <a href="{% url 'social:begin' 'google-oauth2' %}">Connect to Google</a>
  {% endif %}
{% endblock %}